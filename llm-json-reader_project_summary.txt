# llm-json-reader

## Directory Structure

- llm-json-reader/
  - .storybook/
  - .vscode/
  - api/
    - upload.ts
  - app/
    - about/
      - page.tsx
    - favicon.ico (binary file)
    - globals.css
    - layout.tsx
    - page.tsx
    - themeColors/
      - page.tsx
  - components/
    - atoms/
      - ArrowButton/
        - ArrowButton.tsx
        - index.ts
      - Button/
        - Button.tsx
        - index.ts
      - FileUploadButton/
        - FileUploadButton.tsx
        - index.ts
      - LinkButton/
        - index.ts
        - LinkButton.tsx
      - ThemeIcon/
        - index.ts
        - ThemeIcon.tsx
    - molecules/
      - AutoModeSelector/
        - AutoModeSelector.tsx
        - index.ts
      - Card/
        - Card.tsx
        - index.ts
      - FontSizeControl/
        - FontSizeControl.tsx
        - index.ts
      - NowCard/
        - index.ts
        - NowCard.tsx
      - ThemeSelector/
        - index.ts
        - ThemeSelector.tsx
      - ThemeToggle/
        - index.ts
        - ThemeToggle.tsx
    - organisms/
      - JsonCardViewer/
        - index.ts
        - JsonCardViewer.tsx
      - SideAccordion/
        - index.ts
        - SideAccordion.tsx
    - providers/
      - MainProvider/
        - index.ts
        - MainProvider.tsx
    - template/
      - Footer/
        - Footer.tsx
        - index.ts
      - JsonMainView/
        - index.ts
        - JsonMainView.tsx
      - JsonReadLayout/
        - index.ts
        - JsonReadLayout.tsx
      - MainLayout/
        - index.ts
        - MainLayout.tsx
      - Sidebar/
        - index.ts
        - Sidebar.tsx
  - dist/
  - hooks/
  - lib/
    - declarations/
    - env/
      - env.mjs
      - index.ts
    - utils/
      - cn/
        - cn.ts
        - index.ts
      - helpers/
        - helpers.ts
        - index.tx
  - next.config.mjs
  - postcss.config.js
  - public/
  - README.md
  - state/
    - atmos/
      - autoModeAtom.ts
      - errorMessageAtom.ts
      - fileNameAtom.ts
      - fontSizeAtoms.ts
      - invalidDataAtom.ts
      - jsonDataAtom.ts
      - themeAtom.ts
    - FileUploader.tsx
    - JsonPaginator.tsx
  - styles/

## File Contents

### api\upload.ts

```
// pages/api/upload.ts
import type { NextApiRequest, NextApiResponse } from 'next'
import { JsonData } from '@/state/atmos/jsonDataAtom';
import { parseJsonData } from '@/lib/utils/helpers/helpers';
import formidable from 'formidable';

export const config = {
  api: {
    bodyParser: false, // formidableã‚’ä½¿ã†å ´åˆã¯bodyParserã‚’ç„¡åŠ¹ã«ã™ã‚‹
  },
};

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse<JsonData[] | { error: string }>
) {
  if (req.method === 'POST') {
    const form = formidable({ multiples: false });

    try {
      const { files } = await new Promise<{ files: formidable.Files }>(
        (resolve, reject) => {
          form.parse(req, (err, fields, files) => {
            if (err) {
              reject(err);
              return;
            }
            resolve({ files }); // fields ã¯ä½¿ç”¨ã—ãªã„ã®ã§å‰Šé™¤
          });
        }
      );



      // file ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’æ˜ç¤ºçš„ã« formidable.File ã«æŒ‡å®š
      const file = files.file as formidable.File | undefined;

      // file ãŒå­˜åœ¨ã—ãªã„å ´åˆã®å‡¦ç†ã‚’è¿½åŠ 
      if (!file) {
        throw new Error('No file uploaded.');
      }
      // ... (æ®‹ã‚Šã®ã‚³ãƒ¼ãƒ‰)
    }
     catch (error) {
      console.error('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', error);
      res.status(500).json({ error: (error as any).message || 'ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚' }); // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™
    }
  } else {
    res.status(405).end(); // Method Not Allowed
  }
}
```

### app\about\page.tsx

```
// `app/page.tsx` is the UI for the `/` URL
export default function About() {
  const featuresItems = [
    { icon: 'ğŸï¸', name: 'XMLå¯¾å¿œ' },
    { icon: 'ğŸ”', name: 'æ¤œç´¢æ©Ÿèƒ½' },
    { icon: 'ğŸ“¦', name: 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æº' },
    { icon: 'ğŸ¤', name: 'ã‚¢ãƒ—ãƒªä½¿ç”¨è€…ã®TTSã¨é€£æºã—ãŸéŸ³å£°å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰' },
    { icon: 'ğŸ”’', name: 'MQTTã€åˆã¯gRPCã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒãƒ›ã‹ã‚‰ã®æ“ä½œ' },
    { icon: 'ğŸ¨', name: 'ãƒ‡ã‚¶ã‚¤ãƒ³ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º' },
  ];

  return (
    <div>
    <section className="bg-white px-4 dark:bg-gray-900">
      <div className="mx-auto grid max-w-screen-xl px-4 py-4 text-center lg:py-2">
        <div className="mx-auto place-self-center">
          <h1 className="mb-4 max-w-2xl text-4xl font-extrabold leading-none tracking-tight dark:text-white md:text-5xl xl:text-2xl">
            Json Reader for LLM Dataset
            <br /> (Large Language Models)
          </h1>
          <p className="mb-6 max-w-2xl font-light text-gray-500 dark:text-gray-400 md:text-lg lg:mb-8 lg:text-md">
            LLMé–‹ç™ºç”¨ã«ã€jsonãƒ»jsonlå½¢å¼ã§ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’é–²è¦§è¦‹ã‚‹ãŸã‚ã®ã‚¢ãƒ—ãƒªã§ã™ã€‚
          </p>
        </div>
      </div>
    </section>
    <h2 className="text-bold mt-8 mb-10 text-3xl">ğŸš€ Features:</h2>
      <ul className="grid grid-cols-1 grid-rows-1 md:grid-cols-2 gap-4 lg:grid-cols-4">
        {featuresItems.map(({ icon, name }) => (
          <li
            key={name}
            className="flex flex-col text-center items-center hover:scale-105 transition-all hover:shadow-xl duration-300 justify-center gap-2 px-4 py-6 border rounded-lg shadow"
          >
            {/* <span className="text-xl">{icon}</span> */}
            <span>{name}</span>
          </li>
        ))}
      </ul>
      </div>
    );
};
```

### app\globals.css

```
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--background-end-rgb))
    )
    rgb(var(--background-start-rgb));
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

```

### app\layout.tsx

```
'use client';

import { Inter } from "next/font/google";
import "./globals.css";

import React from "react";
import { RecoilRoot } from 'recoil';
import { MainProvider } from "@/components/providers/MainProvider"; import { MainLayout } from "@/components/template/MainLayout";
const inter = Inter({ subsets: ["latin"] });


export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="ja">
      <body>
        <div className={inter.className}>
          <RecoilRoot>
            <MainProvider>
              <MainLayout>{children}</MainLayout>
            </MainProvider>
          </RecoilRoot>
        </div>
      </body>
    </html>
  );
}

```

### app\page.tsx

```
import JsonMainView from "@/components/template/JsonMainView/JsonMainView";
import JsonReadLayout from "@/components/template/JsonReadLayout/JsonReadLayout";

const HomePage = () => {
  
  return (
    <div>
      <JsonReadLayout>
        <JsonMainView />
      </JsonReadLayout>
    </div>
  )
};

export default HomePage;
```

### app\themeColors\page.tsx

```
'use client'

import { useState } from "react";
import { useRecoilState } from "recoil";
import { ThemeMode, customThemeColorsAtom, themeAtom } from "@/state/atmos/themeAtom";

const ThemeColors = () => {
  const [, setTheme] = useRecoilState(themeAtom);
  const [customColors, setCustomColors] = useRecoilState(customThemeColorsAtom);
  const [editingThemeIndex, setEditingThemeIndex] = useState<number | null>(null);

  const handleThemeChange = (selectedTheme: ThemeMode) => {
    setTheme(selectedTheme);
  };

  const handleColorChange = (themeIndex: number, colorKey: string, colorValue: string) => {
    setCustomColors((prevColors) => {
      const newColors = [...prevColors];
      newColors[themeIndex] = { ...newColors[themeIndex], [colorKey]: colorValue };
      return newColors;
    });
  };

  return (
    <div className="container mx-auto p-4">
      <h1 className="text-2xl font-bold mb-4">ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ¼ãƒé¸æŠ</h1>
      <div className="grid grid-cols-2 gap-4">
        {customColors.map((theme, index) => (
          <div
            key={`custom${index}`}
            className="p-4 rounded cursor-pointer"
            onClick={() => handleThemeChange(`custom${index + 1}` as ThemeMode)}
          >
            <div className="p-4 rounded" style={{ backgroundColor: theme.main }}>
              <div className="mb-4">
                <h2 className="text-xl font-bold mb-2" style={{ color: "#000" }}>{theme.name}</h2>
              </div>
              <div className="rounded overflow-hidden">
                <div className="px-6 py-4" style={{ backgroundColor: theme.header, color: theme.headerText }}>
                  <div className="font-bold text-xl mb-2" style={{ color: theme.text }}>Header</div>
                </div>
                <div className="flex">
                  <div className="w-1/4 px-6 py-4" style={{ backgroundColor: theme.sidebar, color: theme.sidebarText }}>
                    <div className="font-bold text-xl mb-2" style={{ color: theme.text }}>Sidebar</div>
                    <div className="font-bold text-xl mb-2" style={{ color: theme.sidebarSelected }}>é¸æŠ</div>
                    <p className="text-base" style={{ color: theme.text }}>Selected</p>
                  </div>
                  <div className="w-3/4 px-6 py-4" style={{ backgroundColor: theme.main, color: theme.mainText }}>
                    <div className="font-bold text-xl mb-2" style={{ color: theme.text }}>Main</div>
                    <p className="text-base" style={{ color: theme.text }}>Content goes here</p>
                  </div>
                </div>
                <div className="px-6 py-4" style={{ backgroundColor: theme.footer, color: theme.footerText }}>
                  <div className="font-bold text-xl mb-2" style={{ color: theme.text }}>Footer</div>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};

export default ThemeColors;

```

### components\atoms\ArrowButton\ArrowButton.tsx

```
import React from 'react';

interface ArrowButtonProps {
  onClick?: () => void;
  disabled?: boolean;
  direction: 'left' | 'right';
}

export default function ArrowButton({ onClick, disabled, direction }: ArrowButtonProps) {
  const arrowIcon = direction === 'left' ? 'â† (å·¦ãƒ»ä¸ŠçŸ¢å°ã‚­ãƒ¼)' : 'â†’ (å³ãƒ»ä¸‹çŸ¢å°ã‚­ãƒ¼)';

  return (
    <button
      className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 rounded"
      onClick={onClick}
      disabled={disabled}
    >
      {arrowIcon}
    </button>
  );
}
```

### components\atoms\ArrowButton\index.ts

```
export * from './ArrowButton';

```

### components\atoms\Button\Button.tsx

```
import React from 'react';

interface ButtonProps {
  onClick?: () => void;
  disabled?: boolean;
  children: React.ReactNode;
}

export default function Button({ onClick, disabled, children }: ButtonProps) {
  return (
    <button
      className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded"
      onClick={onClick}
      disabled={disabled}
    >
      {children}
    </button>
  );
}

```

### components\atoms\Button\index.ts

```
export * from './Button';

```

### components\atoms\FileUploadButton\FileUploadButton.tsx

```
// components/atoms/FileUploadButton/FileUploadButton.tsx
import { jsonDataAtom } from '@/state/atmos/jsonDataAtom';
import { useSetRecoilState } from 'recoil';

const FileUploadButton = () => {
  const setJsonData = useSetRecoilState(jsonDataAtom);

  const handleUpload = (event: React.ChangeEvent<HTMLInputElement>) => {
    const fileReader = new FileReader();

    if (event.target.files?.length) {
      const file = event.target.files[0];

      fileReader.readAsText(file);
      fileReader.onload = () => {
        try {
          const content = fileReader.result as string;

          if (!content.trim()) {
            console.error('Empty JSON file.');
            return;
          }

          let jsonData = JSON.parse(content);

          if (Array.isArray(jsonData)) {
            // JSONãƒ‡ãƒ¼ã‚¿ãŒé…åˆ—ã®å ´åˆã€ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹
            const escapedContent = content.replace(/\\/g, '\\\\');
            jsonData = JSON.parse(escapedContent);
            setJsonData(jsonData);
          } else {
            console.error('Invalid file format. Expected an array of objects.');
          }
        } catch (error) {
          if (error instanceof SyntaxError) {
            console.error('Invalid JSON syntax:', error.message);
          } else {
            console.error('Error parsing JSON file:', error);
          }
        }
      };
    }
  };

  return (
    <div>
      <input type="file" onChange={handleUpload} accept=".json" title="JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚" />
    </div>
  );
};

export default FileUploadButton;

```

### components\atoms\FileUploadButton\index.ts

```
export * from './FileUploadButton';

```

### components\atoms\LinkButton\index.ts

```
export * from './LinkButton';

```

### components\atoms\LinkButton\LinkButton.tsx

```
// components/atoms/LinkButton.tsx
import Link from 'next/link';
import React from 'react';

interface LinkButtonProps {
  href: string;
  label: string;
}

const LinkButton: React.FC<LinkButtonProps> = ({ href, label }) => <Link href={href}>{label}</Link>;

export default LinkButton;

```

### components\atoms\ThemeIcon\index.ts

```
export * from './ThemeIcon';

```

### components\atoms\ThemeIcon\ThemeIcon.tsx

```
import React from 'react';

interface ThemeIconProps {
  theme: 'light' | 'dark';
}

const SunIcon: React.FC = () => (
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6">
    <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z" />
  </svg>
);

const MoonIcon: React.FC = () => (
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6">
    <path fillRule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z" clipRule="evenodd" />
  </svg>
);

const ThemeIcon: React.FC<ThemeIconProps> = ({ theme }) => (
  theme === 'light' ? <MoonIcon /> : <SunIcon />
);

export default ThemeIcon;

```

### components\molecules\AutoModeSelector\AutoModeSelector.tsx

```
'use client';

import { useRecoilState, useRecoilValue } from 'recoil';
import { autoModeSpeedAtom, customSpeedAtom, AutoModeSpeed } from '@/state/atmos/autoModeAtom';
import { indexAtom, jsonDataAtom } from '@/state/atmos/jsonDataAtom';
import { useEffect, useState } from 'react';

const AutoModeSelector: React.FC = () => {
  const [autoModeSpeed, setAutoModeSpeed] = useRecoilState(autoModeSpeedAtom);
  const [customSpeed, setCustomSpeed] = useRecoilState(customSpeedAtom);
  const { data: jsonData, totalCount } = useRecoilValue(jsonDataAtom);

  const [index, setIndex] = useRecoilState(indexAtom);
  const [isLoading, setIsLoading] = useState(true);
  const [isAutoModeOn, setIsAutoModeOn] = useState(false);
  const [currentSecond, setCurrentSecond] = useState(0);
  const [remainingSeconds, setRemainingSeconds] = useState(0);

  useEffect(() => {
    if (jsonData.length > 0) {
      setIsLoading(false);
    }
  }, [jsonData]);

  useEffect(() => {
    let timer: NodeJS.Timeout;

    if (isAutoModeOn) {
      let totalSeconds = 0;

      switch (autoModeSpeed) {
        case '3s':
          totalSeconds = 3;
          break;
        case '5s':
          totalSeconds = 5;
          break;
        case '10s':
          totalSeconds = 10;
          break;
        case 'custom':
          totalSeconds = customSpeed;
          break;
        case 'textLength':
          const textLength = jsonData[index]?.input.length + jsonData[index]?.output.length || 0;
          totalSeconds = Math.ceil(textLength / 10); // 10æ–‡å­—ã‚ãŸã‚Š1ç§’
          break;
      }

      setCurrentSecond(0);
      setRemainingSeconds(totalSeconds);

      timer = setInterval(() => {
        setCurrentSecond((prevSecond) => prevSecond + 0.1); // 100ãƒŸãƒªç§’ã”ã¨ã«æ›´æ–°
        setRemainingSeconds((prevSeconds) => prevSeconds - 0.1);
      }, 100); // 100ãƒŸãƒªç§’ã”ã¨ã«å®Ÿè¡Œ
    }

    return () => {
      clearInterval(timer);
    };
  }, [autoModeSpeed, customSpeed, isAutoModeOn, jsonData, index]);

  const handleSpeedChange = (speed: AutoModeSpeed) => {
    setAutoModeSpeed(speed);
    setIsAutoModeOn(speed !== 'off');
  };

  const handleCustomSpeedChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    const value = parseInt(event.target.value, 10);
    setCustomSpeed(value);
  };

  if (isLoading) {
    return <div></div>;
  }

return (
  <div className="flex w-96 mx-auto flex-grow-0 flex-shrink-0">
    <button
      className={`px-4 py-2 rounded whitespace-nowrap ${isAutoModeOn ? 'bg-green-500 text-white' : 'bg-gray-300 text-gray-800'}`}
      onClick={() => handleSpeedChange(isAutoModeOn ? 'off' : '3s')}
    >
      {isAutoModeOn ? 'ã‚ªãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰' : 'ã‚ªãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰'}
    </button>
    <div className="flex ml-4">
      <button
        className={`px-4 py-2 rounded mx-1 whitespace-nowrap ${autoModeSpeed === '3s' ? 'bg-blue-500 text-white' : 'bg-gray-300 text-gray-800'}`}
        onClick={() => handleSpeedChange('3s')}
      >
        3ç§’
      </button>
      <button
        className={`px-4 py-2 rounded mx-1 whitespace-nowrap ${autoModeSpeed === '5s' ? 'bg-blue-500 text-white' : 'bg-gray-300 text-gray-800'}`}
        onClick={() => handleSpeedChange('5s')}
      >
        5ç§’
      </button>
      <button
        className={`px-4 py-2 rounded mx-1 whitespace-nowrap ${autoModeSpeed === '10s' ? 'bg-blue-500 text-white' : 'bg-gray-300 text-gray-800'}`}
        onClick={() => handleSpeedChange('10s')}
      >
        10ç§’
      </button>
    </div>
    <div className="ml-4 flex items-center">
      {isAutoModeOn && (
        <>
          <progress value={currentSecond} max={currentSecond + remainingSeconds} className="mr-2" />
          <span className="remaining-seconds">{remainingSeconds.toFixed(1)}ç§’</span>
        </>
      )}
      <span className="remaining-seconds empty"></span>
    </div>
  </div>
);

// ...
};

export default AutoModeSelector;

```

### components\molecules\AutoModeSelector\index.ts

```
export * from "./AutoModeSelector";

```

### components\molecules\Card\Card.tsx

```
import React from 'react';
import { useRecoilValue } from 'recoil';

import { fontSizeAtom } from '@/state/atmos/fontSizeAtoms';
import { lightColors, darkColors } from '@/styles/themeColorPalette';
import { themeAtom } from '@/state/atmos/themeAtom';

interface CardProps {
  title: string;
  content?: string;
  displayMode: 'selected' | 'prev' | 'next';
  onClick?: () => void;
}

export default function Card({ title, content = '', displayMode, onClick }: CardProps) {
  const fontSize = useRecoilValue(fontSizeAtom);
  const theme = useRecoilValue(themeAtom);
  const lineHeight = fontSize * 1.5; // ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã®1.5å€ã®å€¤ã‚’è¡Œé–“éš”ã«è¨­å®š

  // const maxHeightClass = displayMode === 'selected' ? '' : 'max-h-40';
  const preClass = displayMode === 'selected' ? 'whitespace-pre-wrap break-words' : 'overflow-auto whitespace-pre-wrap';

  const getColors = () => {
    switch (theme) {
      case 'light':
        return lightColors;
      case 'dark':
        return darkColors;
      default:
        return lightColors;
    }
  };

  const { cardBg, cardText } = getColors();

  return (
    <div
      className={`border border-gray-300 rounded-lg p-4 shadow-md overflow-hidden cursor-pointer transition-colors duration-300`}
      style={{ backgroundColor: cardBg, color: cardText }}
      onClick={onClick}
    >
      <h3 className="text-xl font-bold mb-2">{title}</h3>
      <pre className={`text-sm ${preClass}`} style={{ fontSize: `${fontSize}px`, lineHeight: `${lineHeight}px` }}>
        {displayMode === 'selected'
          ? content || 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„'
          : content
            ? `${content.slice(0, 100)}...`
            : 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„'}
      </pre>
    </div>
  );
}
```

### components\molecules\Card\index.ts

```
export * from "./Card";
```

### components\molecules\FontSizeControl\FontSizeControl.tsx

```
import React from 'react';
import { useRecoilState } from 'recoil';

import { fontSizeAtom } from '@/state/atmos/fontSizeAtoms';

const FontSizeControl: React.FC = () => {
  const [fontSize, setFontSize] = useRecoilState(fontSizeAtom);

  const increaseFontSize = () => {
    setFontSize((prevSize) => Math.min(prevSize + 1, 40));
  };

  const decreaseFontSize = () => {
    setFontSize((prevSize) => Math.max(prevSize - 1, 12));
  };

  return (
    <div className='px-4 flex items-center relative'>
      <span className='absolute -top-5 left-1 text-sm'>minã€12ã€‘:</span>
      <button className={`w-8 h-8 text-white text-lg rounded-full flex items-center justify-center ${fontSize === 12 ? 'bg-gray-500' : 'bg-blue-500'}`} onClick={decreaseFontSize}>
        -
      </button>
      <div className='min-w-[4rem] text-right px-4'>
        <span className="text-lg">{fontSize}px</span>
      </div>
      <span className='absolute -top-5 right-1 text-sm'>maxã€40ã€‘</span>
      <button className={`w-8 h-8 bg-blue-500 text-white text-lg rounded-full flex items-center justify-center ${fontSize === 40 ? 'bg-gray-500' : 'bg-blue-500'}`} onClick={increaseFontSize}>
        +
      </button>
    </div>
  );
};

export default FontSizeControl;

```

### components\molecules\FontSizeControl\index.ts

```
export * from "./FontSizeControl";

```

### components\molecules\NowCard\index.ts

```
export * from "./NowCard";
```

### components\molecules\NowCard\NowCard.tsx

```
import React from 'react';
import { useRecoilValue } from 'recoil';
import { fontSizeAtom } from '@/state/atmos/fontSizeAtoms';
import { JsonData } from '@/state/atmos/jsonDataAtom';
import { themeAtom } from '@/state/atmos/themeAtom';
import { lightColors, darkColors } from '@/styles/themeColorPalette';

interface NowCardProps {
  data: JsonData;
}

const getColors = () => {
  const theme = useRecoilValue(themeAtom);
  switch (theme) {
    case 'light':
      return lightColors;
    case 'dark':
      return darkColors;
    default:
      return lightColors;
  }
};

const NowCard: React.FC<NowCardProps> = ({ data }) => {
  const fontSize = useRecoilValue(fontSizeAtom);
  const { cardBg, cardText } = getColors();

  return (
    <div className="border border-gray-300 rounded-lg p-4 shadow-md overflow-hidden" style={{ backgroundColor: cardBg }}>
      <h3 className="text-xl font-bold mb-2" style={{ color: cardText }}>ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿</h3>
      {Object.entries(data).map(([key, value]) => (
        <div key={key} className="mb-4">
          <h4 className="text-lg font-bold mb-1" style={{ color: cardText }}>{key}</h4>
          {/* valueãŒæ–‡å­—åˆ—ã§ãªã„å ´åˆã®å‡¦ç†ã‚’è¿½åŠ  */}
          {typeof value === 'string' ? (
            <pre className="whitespace-pre-wrap break-words" style={{ fontSize: `${fontSize}px`, color: cardText }}>
              {value}
            </pre>
            ) : (
            <pre className="whitespace-pre-wrap break-words" style={{ fontSize: `${fontSize}px`, color: cardText }}>
            {JSON.stringify(value, null, 2)}
          </pre>
          )}
        </div>
      ))}
    </div>
  );
};

export default NowCard;
```

### components\molecules\ThemeSelector\index.ts

```
export * from "./ThemeSelector";

```

### components\molecules\ThemeSelector\ThemeSelector.tsx

```
import { useRecoilState } from 'recoil';
// import { originalColors } from '@/styles/themeColorPalette';
import { themeAtom, ThemeMode } from '@/state/atmos/themeAtom';

const ThemeSelector = () => {
  const [theme, setTheme] = useRecoilState(themeAtom);

  const handleThemeChange = (selectedTheme: ThemeMode) => {
    setTheme(selectedTheme);
  };

  return (
    <div>
      <button onClick={() => handleThemeChange('light')}>Light</button>
      <button onClick={() => handleThemeChange('dark')}>Dark</button>
      {/* {originalColors.map((color, index) => (
        <button key={color.name} onClick={() => handleThemeChange(`original${index}` as ThemeMode)}>
          {color.name}
        </button>
      ))} */}
    </div>
  );
};

export default ThemeSelector;

```

### components\molecules\ThemeToggle\index.ts

```
export * from "./ThemeToggle";

```

### components\molecules\ThemeToggle\ThemeToggle.tsx

```
'use client'

import { useRecoilState, useRecoilValue } from 'recoil';
import ThemeIcon from '@/components/atoms/ThemeIcon/ThemeIcon';
import { customThemeColorsAtom, themeAtom } from '@/state/atmos/themeAtom';

const ThemeToggle = () => {

  const [theme, setTheme] = useRecoilState(themeAtom);
  const customColors = useRecoilValue(customThemeColorsAtom);

  const toggleTheme = () => {
    setTheme(theme === 'light' ? 'dark' : 'light');
  };

  const isCustomTheme = theme.startsWith('custom');

  return (
    <div className="flex items-center">
      <button
        onClick={toggleTheme}
        className={`p-2 rounded ${isCustomTheme ? 'opacity-50' : ''}`}
      >
        <ThemeIcon theme={theme as 'light' | 'dark' | string} />
      </button>
      {/* <Link href="/themeColors">
        <button className="ml-4 px-4 py-2 rounded bg-blue-500 text-white">
          é¸æŠãƒ†ãƒ¼ãƒè‰²
        </button>
      </Link> */}
      {isCustomTheme && (
        <div
          className="ml-4 w-6 h-6 rounded-full"
          style={{
            backgroundColor:
              customColors[parseInt(theme.replace('custom', '')) - 1].main,
          }}
        />
      )}
    </div>
  );
};

export default ThemeToggle;

```

### components\organisms\JsonCardViewer\index.ts

```
export * from './JsonCardViewer';

```

### components\organisms\JsonCardViewer\JsonCardViewer.tsx

```
import { useRecoilState, useRecoilValue } from 'recoil';

import { jsonDataAtom, indexAtom } from '@/state/atmos/jsonDataAtom';
import { useCallback, useEffect } from 'react';
import React from 'react';

const JsonCardViewer = () => {
  const [jsonData, setJsonData] = useRecoilState(jsonDataAtom);
  const [index, setIndex] = useRecoilState(indexAtom);

  // useCallbackãƒ•ãƒƒã‚¯ã‚’useEffectã®å¤–ã§å®šç¾©
  const handleArrowKey = useCallback((event: KeyboardEvent) => {
    console.log(index)
    if (event.key === 'ArrowRight') {
      setIndex((index) => Math.min(index + 1, jsonData.data.length - 1));
    } else if (event.key === 'ArrowLeft') {
      setIndex((index) => Math.max(index - 1, 0));
    }
  }, [index, jsonData.data.length]);

  useEffect(() => {
    window.addEventListener('keydown', handleArrowKey);
    return () => {
      window.removeEventListener('keydown', handleArrowKey);
    };
  }, [handleArrowKey]); // useCallbackã§ãƒ¡ãƒ¢åŒ–ã•ã‚ŒãŸé–¢æ•°ã‚’ä¾å­˜é…åˆ—ã«è¿½åŠ 

  const nowCard = (item: any, originalIndex: number) => {
    // é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤º
    if (originalIndex === index && originalIndex < jsonData.data.length) {
      return (
        <div key={originalIndex.toString()}>
          <div>{JSON.stringify(item, null, 2)}</div>
        </div>
      );
    }
    return null;
  };

  const previousCard = (item: any, originalIndex: number) => {
    // é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ ã®1ã¤å‰ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤º
    if (index === 0) {
      // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒ0ã®å ´åˆã¯ "Start" ã‚’è¡¨ç¤º
      return (
        <div key={originalIndex}>
          <div>Start</div>
        </div>
      );
    } else if (originalIndex === index - 1 && originalIndex < jsonData.data.length) {
      return (
        <div key={originalIndex}>
          <div>Category: {item.category}</div>
          <div>Instruction: {item.instruction}</div>
        </div>
      );
    }
    return null;
  };

  const nextCard = (item: any, originalIndex: number) => {
    // é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ ã®1ã¤å¾Œã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤º
    if (originalIndex === jsonData.data.length) {
      // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒjsonDataã®æœ€å¾Œã®è¦ç´ ã®å ´åˆã¯ "Last" ã‚’è¡¨ç¤º
      return (
        <div key={originalIndex}>
          <div>Last</div>
        </div>
      );
    } else if (originalIndex === index + 1 && originalIndex < jsonData.data.length) {
      return (
        <div key={originalIndex}>
          <div>Category: {item.category}</div>
          <div>Instruction: {item.instruction}</div>
        </div>
      );
    }
    return null;
  };

  return (
    <div>
      {jsonData && jsonData.data.length > 0 ? (
        <>
          {previousCard(jsonData[index - 1], index - 1)}
          <div key={index}>
            {/* ç¾åœ¨ã®ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤º */}
            {nowCard(jsonData[index], index)}
          </div>
          {nextCard(jsonData[index + 1], index + 1)}
        </>
      ) : (
        <div>
          <p>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br />
            jsonlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚</p>
        </div>
      )}
    </div>
  );
};

export default JsonCardViewer;

```

### components\organisms\SideAccordion\index.ts

```
export * from './SideAccordion';

```

### components\organisms\SideAccordion\SideAccordion.tsx

```
const SideAccordion = () => {
  return (
    <div>
      
    </div>
  );
}

export default SideAccordion;
```

### components\providers\MainProvider\index.ts

```
export * from './MainProvider';

```

### components\providers\MainProvider\MainProvider.tsx

```
import { ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

// This is the place responsible for grouping all providers from the app
export const MainProvider = ({ children }: Props) => <>{children}</>;

```

### components\template\Footer\Footer.tsx

```
'use client';

import { useRecoilValue } from 'recoil';
import { fileNameAtom } from '@/state/atmos/fileNameAtom';
import { lightColors, darkColors } from '@/styles/themeColorPalette';
import { themeAtom, customThemeColorsAtom } from '@/state/atmos/themeAtom';
import { jsonDataAtom, indexAtom } from '@/state/atmos/jsonDataAtom';
import AutoModeSelector from '@/components/molecules/AutoModeSelector/AutoModeSelector';

const Footer = () => {
  const fileName = useRecoilValue(fileNameAtom);
  const theme = useRecoilValue(themeAtom);
  const customColors = useRecoilValue(customThemeColorsAtom);
  const { data: jsonData, totalCount } = useRecoilValue(jsonDataAtom);

  const index = useRecoilValue(indexAtom);

  const getColors = () => {
    switch (theme) {
      case 'light':
        return lightColors;
      case 'dark':
        return darkColors;
      default:
        if (theme.startsWith('custom')) {
          const customIndex = parseInt(theme.replace('custom', ''), 10) - 1;
          return customColors[customIndex];
        }
        return lightColors;
    }
  };

  const colors = getColors();

  return (
    <footer
      className="flex items-center justify-between p-4"
      style={{ backgroundColor: colors.footer, color: colors.footerText }}
    >
      <div>{fileName || ''}</div>
      <div className="">
        {jsonData.length > 0 ? (
          <div className="flex">
            {/* <FontSizeControl /> */} 
            <AutoModeSelector />
          </div>
        ): (
            <div></div>
        )}
      </div>
      {jsonData.length > 0 ? (
        <div>
          <span>ç¾åœ¨ã®index: {index} / å…¨ä»¶æ•°: {totalCount} ä»¶</span>
        </div>
      ): (
        <span>LLM-JSON-READER</span>
      )
      }
    </footer>
  );
};

export default Footer;

```

### components\template\Footer\index.ts

```
export * from './Footer';

```

### components\template\JsonMainView\index.ts

```
export * from './JsonMainView';

```

### components\template\JsonMainView\JsonMainView.tsx

```
'use client';

import { useCallback, useEffect, useState } from "react";
import { useRecoilState, useRecoilValue } from "recoil";

import { indexAtom, jsonDataAtom, renderedDataAtom } from "@/state/atmos/jsonDataAtom";

import Card from "@/components/molecules/Card/Card";
import { autoModeSpeedAtom, customSpeedAtom } from "@/state/atmos/autoModeAtom";
import NowCard from "@/components/molecules/NowCard/NowCard";
import { invalidDataAtom } from "@/state/atmos/invalidDataAtom";
;

export const JsonMainView = () => {

  const { data: jsonData } = useRecoilValue(jsonDataAtom);
  const [index, setIndex] = useRecoilState(indexAtom);
  const autoModeSpeed = useRecoilValue(autoModeSpeedAtom);
  const customSpeed = useRecoilValue(customSpeedAtom);
  const renderedData = useRecoilValue(renderedDataAtom);
  const invalidData = useRecoilValue(invalidDataAtom);

  const currentCard = renderedData[index];
  const prevCard = index > 0 ? renderedData[index - 1] : null;
  const nextCard = index < renderedData.length - 1 ? renderedData[index + 1] : null;


  const handlePrevClick = () => {
    setIndex((prevIndex: number) => Math.max(prevIndex - 1, 0));
  };

  const handleNextClick = () => {
  if (index < renderedData.length - 1 && index < jsonData.length - 1) {
    setIndex((prevIndex: number) => prevIndex + 1);
  }
};

const handleArrowKey = useCallback((event: KeyboardEvent) => {
  if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
    if (index < renderedData.length - 1 && index < jsonData.length - 1) {
      setIndex((prevIndex: number) => prevIndex + 1);
    }
  } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
    setIndex((prevIndex: number) => Math.max(prevIndex - 1, 0));
  }
}, [index, jsonData.length, renderedData.length, setIndex]);

  useEffect(() => {
    window.addEventListener('keydown', handleArrowKey);
    return () => {
      window.removeEventListener('keydown', handleArrowKey);
    };
  }, [handleArrowKey]);

  useEffect(() => {
    let timer: NodeJS.Timeout;

    if (autoModeSpeed !== 'off') {
      let delay = 0;

      switch (autoModeSpeed) {
        case '3s':
          delay = 3000;
          break;
        case '5s':
          delay = 5000;
          break;
        case '10s':
          delay = 10000;
          break;
        case 'custom':
          delay = customSpeed * 1000;
          break;
        case 'textLength':
          const textLength = jsonData[index]?.input.length || 0;
          delay = textLength * 50; // æ–‡å­—æ•°ã«å¿œã˜ã¦ç§’æ•°ã‚’è¨ˆç®—ï¼ˆä¾‹: 1æ–‡å­—ã‚ãŸã‚Š50ãƒŸãƒªç§’ï¼‰
          break;
      }

      timer = setTimeout(() => {
        setIndex((prevIndex) => (prevIndex + 1) % jsonData.length);
      }, delay);
    }

    return () => {
      clearTimeout(timer);
    };
  }, [autoModeSpeed, customSpeed, index, jsonData]);


  return (
    <div>
      {invalidData ? (
        <div>
        <div className="text-red-500">
          å¯¾å¿œã—ã¦ã„ãªã„ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚<br />
          ç¾åœ¨å¯¾å¿œä¸­ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€llm-jp-evalã®tuningãƒ‡ãƒ¼ã‚¿ã®ã¿ã§ã™ã€‚<br />
        </div>
          <a href="https://github.com/llm-jp/llm-jp-eval">(Github) llm-jp-eval </a>
        </div>
      )
       : jsonData.length > 0 && (
        <div className="w-full px-2 mb-4 md:mb-0">
          {currentCard ? (
            <NowCard data={currentCard} />
          ) : (
            <Card title="No Data" content="" displayMode="selected" />
          )}
        </div>
      )}
      {jsonData.length > 0 && (<br />)}
      {jsonData.length > 0 && (
        <div className="flex flex-col md:flex-row">
          <div className="w-full md:w-1/2 px-2 mb-4 md:mb-0 h-40 max-h-40">
            {prevCard ? (
              <Card
                title="å‰ãƒ‡ãƒ¼ã‚¿ã€€(â†ãƒ»â†‘)"
                content={`Input: ${prevCard.input}\nOutput: ${prevCard.output}`}
                displayMode="prev"
                onClick={() => setIndex(index - 1)}
              />
            ) : (
              <Card title="1ã¤å‰ã®ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“" content="å…ˆé ­ãƒ‡ãƒ¼ã‚¿" displayMode="prev" />
            )}
          </div>

          <div className="w-full md:w-1/2 px-2 h-40 max-h-40">
            {nextCard ? (
              <Card
                title="æ¬¡ã®ãƒ‡ãƒ¼ã‚¿ã€€(â†’ãƒ»â†“)"
                content={`Input: ${nextCard.input}\nOutput: ${nextCard.output}`}
                displayMode="next"
                onClick={() => setIndex(index + 1)}
              />
            ) : (
              <Card title="æ¬¡ã®ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“" content="æœ€çµ‚ãƒ‡ãƒ¼ã‚¿" displayMode="next" />
            )}
          </div>
        </div>
      )}
    </div>
    );
}

export default JsonMainView;

```

### components\template\JsonReadLayout\index.ts

```
export * from './JsonReadLayout';

```

### components\template\JsonReadLayout\JsonReadLayout.tsx

```
import React from 'react';

const JsonReadLayout: React.FC<{ children: React.ReactNode }> = ({ children }) => {
   return <div className="flex-1 p-2">{children}</div>;
};

export default JsonReadLayout;

```

### components\template\MainLayout\index.ts

```
export * from './MainLayout';

```

### components\template\MainLayout\MainLayout.tsx

```
import { ReactNode } from 'react';
import Link from 'next/link';

import { cn } from '@/lib/utils/cn';
import { useRecoilValue } from 'recoil';

import Sidebar from '@/components/template/Sidebar/Sidebar';
import ThemeToggle from '@/components/molecules/ThemeToggle/ThemeToggle';
import { lightColors, darkColors } from '@/styles/themeColorPalette';
import { themeAtom, customThemeColorsAtom } from '@/state/atmos/themeAtom';
import Footer from '@/components/template/Footer/Footer';
import FileUploader from '@/state/FileUploader';

interface MainLayoutProps {
  children: ReactNode;
  className?: string;
}

const links = [
  { slug: '/', label: 'Home', isActive: true },
  { slug: '/about', label: 'About', isActive: false },
];

export const MainLayout = ({ children, className }: MainLayoutProps) => {
  const theme = useRecoilValue(themeAtom);
  const customColors = useRecoilValue(customThemeColorsAtom);
  const wrapperStyles = cn('layout flex flex-col min-h-screen 100vh', className);

  const getColors = () => {
    switch (theme) {
      case 'light':
        return lightColors;
      case 'dark':
        return darkColors;
      default:
        if (theme.startsWith('custom')) {
          const customIndex = parseInt(theme.replace('custom', ''), 10) - 1;
          return customColors[customIndex];
        }
        return lightColors;
    }
  };

  const colors = getColors();

  return (
    <div>
      <div className={wrapperStyles}>
        <div className="flex flex-col h-screen" style={{ backgroundColor: colors.main, color: colors.text }}>
          <header className="py-4 px-6" style={{ backgroundColor: colors.header, color: colors.headerText }}>
            <div className="flex justify-between items-center">
              <ul className="flex items-center gap-10 text-gray-500">
                {links.map(({ slug, label, isActive }) => (
                  <li key={slug}>
                    <Link
                      href={slug}
                      className={`inline-block p-2 transition-colors ${
                        isActive ? 'text-primary' : 'hover:text-green-300'
                      }`}
                    >
                      {label}
                    </Link>
                  </li>
                ))}
              </ul>
              <FileUploader/>              
              <ThemeToggle />
            </div>
          </header>
          <div className="flex flex-1 overflow-hidden">
            <div className="w-full md:w-[300px] lg:block hidden" style={{ backgroundColor: colors.sidebar }}>
              <Sidebar
                backgroundColor={colors.sidebar}
                textColor={colors.text}
                selectedBackgroundColor={colors.sidebarSelected}
                selectedTextColor={colors.text}
                hoverBackgroundColor={colors.sidebarHover}
              />
            </div>
            <main className="flex-grow overflow-y-auto p-6 md:w-[calc(100%-300px)] w-full">
              {children}
            </main>
          </div>
          <Footer />
        </div>
      </div>
    </div>
  );
};

export default MainLayout;

```

### components\template\Sidebar\index.ts

```
export * from './Sidebar';

```

### components\template\Sidebar\Sidebar.tsx

```
'use client';

import { useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';
import { chunkSizeAtom, indexAtom, jsonDataAtom, renderedDataAtom } from '@/state/atmos/jsonDataAtom';
import { useRef, useEffect, useState, useCallback } from 'react';
import Button from '@/components/atoms/Button/Button';

interface SidebarProps {
  backgroundColor: string;
  textColor: string;
  selectedBackgroundColor: string;
  selectedTextColor: string;
  hoverBackgroundColor: string;
}

const Sidebar: React.FC<SidebarProps> = ({
  backgroundColor,
  textColor,
  selectedBackgroundColor,
  selectedTextColor,
}) => {
  const { data: jsonData, totalCount } = useRecoilValue(jsonDataAtom);
  const chunkSize = useRecoilValue(chunkSizeAtom);
  const setRenderedData = useSetRecoilState(renderedDataAtom);
  const renderedData = useRecoilValue(renderedDataAtom);
  const [isLoadingMore, setIsLoadingMore] = useState(false);
  const [index, setIndex] = useRecoilState(indexAtom);

  const selectedItemRef = useRef<HTMLDivElement | null>(null);
  const sidebarRef = useRef<HTMLDivElement | null>(null);

  const loadMoreData = useCallback(async () => {
  if (renderedData.length < jsonData.length) {
    setIsLoadingMore(true);
    const start = renderedData.length;
    const end = Math.min(start + chunkSize, jsonData.length);
    const newData = jsonData.slice(start, end);
    setRenderedData((prevData) => [...prevData, ...newData]);
    setIsLoadingMore(false);
  }
}, [renderedData.length, chunkSize, jsonData, setRenderedData]);

useEffect(() => {
  setRenderedData(jsonData.slice(0, chunkSize));
}, [jsonData, chunkSize, setRenderedData]);

  useEffect(() => {
  if (selectedItemRef.current && sidebarRef.current) {
    const sidebar = sidebarRef.current;
    const selectedItem = selectedItemRef.current;
    const itemHeight = selectedItem.offsetHeight;
    const sidebarHeight = sidebar.offsetHeight;

    // é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ ã®å‰å¾Œã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã®æ•°
    const bufferItems = 4;
    let scrollPosition = sidebar.scrollTop;

    // é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚µã‚¤ãƒ‰ãƒãƒ¼ã®è¡¨ç¤ºç¯„å›²å†…ã«ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
    const selectedItemTop = index * itemHeight;
    const selectedItemBottom = selectedItemTop + itemHeight;
    const sidebarVisibleTop = sidebar.scrollTop;
    const sidebarVisibleBottom = sidebarVisibleTop + sidebarHeight;

    // é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ä¸Šéƒ¨ã«è¿‘ã¥ã„ãŸå ´åˆ
    if (selectedItemTop < sidebarVisibleTop + itemHeight * bufferItems) {
      scrollPosition = Math.max(selectedItemTop - itemHeight * bufferItems, 0);
    }
    // é¸æŠä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ä¸‹éƒ¨ã«è¿‘ã¥ã„ãŸå ´åˆ
    else if (selectedItemBottom > sidebarVisibleBottom - itemHeight * bufferItems) {
      // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ä¸‹éƒ¨ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã®æ•°ã‚’è€ƒæ…®ã—ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚’èª¿æ•´
      scrollPosition = selectedItemBottom + itemHeight * bufferItems - sidebarHeight;
    }

    // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹
    sidebar.scrollTop = scrollPosition;
  }
}, [index, jsonData.length]);

  return (
    <div ref={sidebarRef} className="p-4 h-full overflow-y-auto" style={{ backgroundColor, color: textColor }}>
      {jsonData.length === 0 ? (
        <div className="text-center">LLM JP Eval ãƒ‡ãƒ¼ã‚¿ã®<br />ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„<br />
        <br />ç¾åœ¨ : llm-jp-evalã®<br />tuningãƒ‡ãƒ¼ã‚¿ã«ã®ã¿å¯¾å¿œ<br /><br />
        {/* llm-jp-eval/<br />dataset_dir/<br />1.2.0/<br />tuning/ä»¥ä¸‹ãƒ•ã‚©ãƒ«ãƒ€ */}
        </div>
      ) : (
        renderedData.map((data, i) => (
          <div
            key={i}
            ref={index === i ? selectedItemRef : null}
            className={`py-2 px-4 cursor-pointer truncate overflow-hidden text-ellipsis whitespace-nowrap
              ${index === i ? 'selected' : 'hover:bg-gray-200'
              }`}
            style={{
              backgroundColor: index === i ? selectedBackgroundColor : '',
              color: index === i ? selectedTextColor : '',
            }}
            onClick={() => setIndex(i)}
          >
            {`${i}: ${data.input}`}
          </div>
        ))
      )}
      {isLoadingMore && <div className="text-center">èª­ã¿è¾¼ã¿ä¸­...</div>}
      {!isLoadingMore && renderedData.length < totalCount && (
        <div className="text-center mt-4">
          <Button onClick={loadMoreData}>æ¬¡ã®1000ä»¶ã‚’èª­ã¿è¾¼ã‚€</Button>
        </div>
      )}
    </div>
  );
};

export default Sidebar;

```

### lib\env\env.mjs

```
import { createEnv } from '@t3-oss/env-nextjs';
// import { z } from 'zod';

const skipValidation =
  !!process.env.SKIP_ENV_VALIDATION &&
  process.env.SKIP_ENV_VALIDATION !== 'false' &&
  process.env.SKIP_ENV_VALIDATION !== '0';

export const env = createEnv({
  skipValidation,
  server: {},
  client: {
    // NEXT_PUBLIC_EXAMPLE: z.string()
  },
  runtimeEnv: {
    // NEXT_PUBLIC_EXAMPLE: process.env.NEXT_PUBLIC_EXAMPLE
  }
});

```

### lib\env\index.ts

```
export * from './env.mjs';

```

### lib\utils\cn\cn.ts

```
import { clsx, type ClassValue } from 'clsx';
import { twMerge } from 'tailwind-merge';

/**
 * The function `cn` is a TypeScript function that merges multiple class lists into a single class
 * list.
 * @param {ClassValue[]} classLists - classLists is a rest parameter that allows you to pass in
 * multiple class lists as arguments. Each class list is represented by the ClassValue type.
 */
export const cn = (...classLists: ClassValue[]) => twMerge(clsx(classLists));

```

### lib\utils\cn\index.ts

```
export * from './cn';

```

### lib\utils\helpers\helpers.ts

```
import { JsonData } from "@/state/atmos/jsonDataAtom";

export function countOccurrences(array: any[], key: string): { [key: string]: number } {
  return array.reduce((acc, obj) => {
    const property = obj[key];
    acc[property] = (acc[property] || 0) + 1;
    return acc;
  }, {});
}

// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§JSONãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹é–¢æ•°
export function parseJsonData(jsonData: any[], setInvalidData: (value: boolean) => void): JsonData[] {
  // å…¨ã¦ã®è¦ç´ ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã“ã¨ã‚’ãƒã‚§ãƒƒã‚¯
  if (Array.isArray(jsonData) && jsonData.every(item => typeof item === 'object' && item !== null)) {
    setInvalidData(false);
    return jsonData;
  } else {
    setInvalidData(true);
    console.error('ç„¡åŠ¹ãªãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™ã€‚JSONã®é…åˆ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚');
    return [];
  }
}

// JSONãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
function isValidJsonData(data: any): data is JsonData {
  return (
    typeof data === 'object' &&
    data !== null &&
    typeof data.ID === 'string' &&
    typeof data.instruction === 'string' &&
    typeof data.input === 'string' &&
    typeof data.output === 'string' &&
    typeof data.text === 'string'
  );
}
```

### lib\utils\helpers\index.tx

```
export * from './helpers';

```

### next.config.mjs

```
/** @type {import('next').NextConfig} */
const nextConfig = {
    output: "export",
    distDir: "dist",
    reactStrictMode: false,
};

export default nextConfig;

```

### postcss.config.js

```
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};

```

### README.md

```
# LLM-Json-Reader

LLM-Json-Readerã¯ã€JSONãŠã‚ˆã³JSONLå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’é–²è¦§ç”¨ã§ã™ã€‚<br />
å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLLMï¼‰ã®é–‹ç™ºã«ä½¿ç”¨ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¦–è¦šåŒ–ã®ãŸã‚ã®ã‚¢ãƒ—ãƒªã§ã™ã€‚

é–‹ç™ºã«ã‚ãŸã‚Šã€å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã‚µã‚¤ãƒˆæ§˜<br />
[Next.js 14 + TypeScript + Tailwind + ESLint + Prettier ç’°å¢ƒæ§‹ç¯‰æ‰‹é †](https://zenn.dev/siakas/articles/05481bdefacd13)

#### èª­è¾¼ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å¯¾å¿œçŠ¶æ³

- [x] llm-jp-evalã®tuningãƒ‡ãƒ¼ã‚¿
- [ ] Mt-bench

### llm-jp-eval
è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ¨ªæ–­ã—ã¦æ—¥æœ¬èªã®å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã‚’è‡ªå‹•è©•ä¾¡ã™ã‚‹ã‚‚ã®ã€‚
ã€ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°å…±é€šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‘ã‚’é–²è¦§ã§ãã¾ã™ã€‚<br />
[llm-jp-eval (github)](https://github.com/llm-jp/llm-jp-eval/tree/main)<br />
ä¸Šè¨˜ãƒªãƒ³ã‚¯å…ˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ–¹æ³•ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚‚ã®ã‚’ã€ãƒ‡ãƒ¼ã‚¿èª­è¾¼ã¨ã—ã¦é¸æŠãã ã•ã„ã€‚<br />
ä¾‹: llm-jp-eval/dataset_dir/(version)/tuning/dev/train/chabsa.json
v1.2.0ã«ã¦ç¢ºèªæ¸ˆã¿

#### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¾‹
```
[
    {
        "ID": "jemhopqa-0",
        "instruction": "è³ªå•ã‚’å…¥åŠ›ã¨ã—ã€å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚å›ç­”ã®ä»–ã«ã¯ä½•ã‚‚å«ã‚ãªã„ã“ã¨ã‚’å³å®ˆã—ã¦ãã ã•ã„ã€‚",
        "input": "è³ªå•ï¼šã‚¯ã‚¤ãƒ¼ãƒ³ã¨ãƒ“ãƒ¼ãƒˆãƒ«ã‚ºã¯ã©ã¡ã‚‰ã‚‚ã‚¤ã‚®ãƒªã‚¹å‡ºèº«ã®ãƒãƒ³ãƒ‰ã§ã™ã‹ï¼Ÿ",
        "output": "YES",
        "text": "<INSTRUCTION|LLM-jp>è³ªå•ã‚’å…¥åŠ›ã¨ã—ã€å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚å›ç­”ã®ä»–ã«ã¯ä½•ã‚‚å«ã‚ãªã„ã“ã¨ã‚’å³å®ˆã—ã¦ã>ã ã•ã„ã€‚\n<INPUT|LLM-jp>è³ªå•ï¼šã‚¯ã‚¤ãƒ¼ãƒ³ã¨ãƒ“ãƒ¼ãƒˆãƒ«ã‚ºã¯ã©ã¡ã‚‰ã‚‚ã‚¤ã‚®ãƒªã‚¹å‡ºèº«ã®ãƒãƒ³ãƒ‰ã§ã™ã‹ï¼Ÿ\n<OUTPUT|LLM-jp>YES"
    },
    {
        "ID": "jemhopqa-1",
        "instruction": "è³ªå•ã‚’å…¥åŠ›ã¨ã—ã€å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚å›ç­”ã®ä»–ã«ã¯ä½•ã‚‚å«ã‚ãªã„ã“ã¨ã‚’å³å®ˆã—ã¦ãã ã•ã„ã€‚",
        "input": "è³ªå•ï¼šæ±äº¬éƒ½ä¸­å¤®åŒºã¨ä¸­é‡åŒºã€2005å¹´æ™‚ç‚¹ã§ã®æ˜¼é–“äººå£ãŒå¤šã„ã®ã¯ä¸­å¤®åŒºã§ã™ã‹ï¼Ÿ",
        "output": "YES",
        "text": "<INSTRUCTION|LLM-jp>è³ªå•ã‚’å…¥åŠ›ã¨ã—ã€å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚å›ç­”ã®ä»–ã«ã¯ä½•ã‚‚å«ã‚ãªã„ã“ã¨ã‚’å³å®ˆã—ã¦ã>ã ã•ã„ã€‚\n<INPUT|LLM-jp>è³ªå•ï¼šæ±äº¬éƒ½ä¸­å¤®åŒºã¨ä¸­é‡åŒºã€2005å¹´æ™‚ç‚¹ã§ã®æ˜¼é–“äººå£ãŒå¤šã„ã®ã¯ä¸­å¤®åŒºã§ã™ã‹ï¼Ÿ\n<OUTPUT|LLM-jp>YES"
    },
    ...
]

```
<br />

### MT-bench
å¯¾å¿œäºˆå®š

## ã‚¢ãƒ—ãƒªä½œå‹•ã«å¿…è¦ã¨ãªã‚‹äº‹å‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‰©
#### Node.js (version20.9.0ã‚’ä½¿ç”¨)
Node.jsã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶å¤–ã§JavaScriptã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€JavaScriptã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚<br />
Node.jsã‚’ä½¿ç”¨ã™ã‚‹ã«ã‚ãŸã£ã¦ã¯ã€nvmãªã©ã®Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚<br />
pythonã§è¨€ã†ã¨ã“ã‚ã®pyenvï¼ˆè¤‡æ•°ã®pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ä½¿ç”¨ã§ãã‚‹æŠ€è¡“ï¼‰ã€‚

#### pnpm
pnpmã¯ã€Œperformant npmã€ã¨ã„ã†æ„å‘³ã§ã€npmã‚„yarnã¨ä¸¦ã¶JavaScriptã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚<br />
yarnã‚’ä½¿ç”¨ã™ã‚‹äºˆå®šã§ã—ãŸãŒã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®éš›ã®é«˜é€ŸåŒ–ã€å®¹é‡ã®åŠ¹ç‡åŒ–ã®ãŸã‚æ¡ç”¨ã—ã¦ã‚ã‚Šã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆä½¿ç”¨æ–¹æ³•ï¼‰

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚ï¼ˆè‡ªåˆ†ã®ãƒ‘ã‚½ã‚³ãƒ³ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚ˆã†ãªã‚‚ã®ï¼‰

```bash
git clone https://github.com/yourusername/llm-json-reader.git
```

2. å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã«ã€ãƒ•ã‚©ãƒ«ãƒ€å†…ã«ç§»å‹•ã—ã€<br />
   ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

```bash
cd llm-json-reader
```
```bash
pnpm install
```

ï¼ˆâ€» ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã™ã‚‹ã¾ãˆã«pnpm installã‚’å®Ÿè¡Œã—ã¦ã—ã¾ã„ãŒã¡ã€‚å¿…ãšå¯¾è±¡ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã—ã¦ãã ã•ã„ã€‚<br />
   ã‚„ã£ã¦ã—ã¾ã£ãŸå ´åˆã¯ã€å‰Šé™¤ã—ã¦ã‹ã‚‰ã‚„ã‚Šç›´ã™ã®ãŒä¸€ç•ªç°¡å˜ã€‚<br />
   åˆã¯ã€å‡ºæ¥ä¸ŠãŒã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’llm-json-readerãƒ•ã‚©ãƒ«ãƒ€å†…ã«ç§»å‹•ã€‚ï¼‰

3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¾ã™ã€‚

```bash
pnpm dev
```

4. ãƒ–ãƒ©ã‚¦ã‚¶ã§`http://localhost:3000`ã‚’é–‹ãã¾ã™ã€‚
   <br />

5. ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ãƒœã‚¿ãƒ³ã‹ã‚‰ã€èª­ã¿è¾¼ã¿ãŸã„JSONãƒ‡ãƒ¼ã‚¿ãªã©ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚<br />
6. å¯¾å¿œãƒ‡ãƒ¼ã‚¿é †æ¬¡æ›´æ–°ä¸­ã€‚

### ä½¿ç”¨æŠ€è¡“

- Next.js (App Routerï¼šä½¿ã£ã¦ã¿ãŸã‹ã£ãŸ)
- TypeScriptï¼ˆå‹å®‰å…¨ï¼šã‚¢ãƒ—ãƒªã®ãƒã‚°ã‚’é˜²ããŸã‚ã®ä»•çµ„ã¿ï¼‰
- Tailwind CSSï¼ˆãƒ‡ã‚¶ã‚¤ãƒ³ï¼šãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰
- Recoilï¼ˆçŠ¶æ…‹ç®¡ç†ï¼šå¤‰æ•°ã‚’ã†ã¾ãä½¿ã†ï¼‰
- ESLintï¼ˆé™çš„æ¤œè¨¼ãƒ„ãƒ¼ãƒ«ï¼šã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼æ¤œå‡ºï¼‰
- Prettierï¼ˆã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼šã‚³ãƒ¼ãƒ‰æ•´å½¢ï¼‰
- pnpmï¼ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ï¼šã‚¢ãƒ—ãƒªã«ä½¿ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã®ç®¡ç†ï¼‰
- gulpï¼ˆã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ï¼šã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚„åœ§ç¸®ãªã©ã®è‡ªå‹•åŒ–ï¼‰

#### å¾Œæ—¥è¿½åŠ äºˆå®šï¼ˆå¿…è¦ã«ãªã‚Œã°

- ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã€ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã»ã‹ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ¼ãƒï¼ˆã‚„ã£ã±ã‚Šä¸å¿…è¦ã«æ„Ÿã˜ãŸãŸã‚ã€ä¸€åº¦å‰Šé™¤ï¼‰
- ãƒ†ã‚­ã‚¹ãƒˆã®é•·ã•ã«åˆã‚ã›ãŸç§’æ•°è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆå¾®èª¿æ•´ä¸­ï¼‰
- SQLite (å°†æ¥çš„ã«ã¯PostgreSQLã¸ã®ç§»è¡Œã‹ä½µç”¨ã‚’æƒ³å®š)
- Storybook

### Features (è¿½åŠ æ©Ÿèƒ½)

- [ ] XMLå½¢å¼å¯¾å¿œ
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨é€£æºã—ã€ä½•ã‚‰ã‹ã®æ©Ÿèƒ½
- [ ] ã‚¢ãƒ—ãƒªä½¿ç”¨è€…ã®TTSã¨é€£æºã—ãŸéŸ³å£°å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰
- [ ] MQTTã€åˆã¯gRPCã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒãƒ›ã‹ã‚‰ã®æ“ä½œ

## AIã‹ã‚‰ã®æ©Ÿèƒ½è¦æœ›ãƒªã‚¹ãƒˆï¼ˆæ¤œè¨ä¸­

~~1. JSONãŠã‚ˆã³JSONLå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã¨è¡¨ç¤º~~<br />
2. è¤‡æ•°ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã®çµ±åˆè¡¨ç¤º<br />
3. JSONãƒ‡ãƒ¼ã‚¿ã®CSVãŠã‚ˆã³Excelãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ<br />
4. JSONãƒ‡ãƒ¼ã‚¿ã®ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ãªå¯è¦–åŒ–ï¼ˆæ£’ã‚°ãƒ©ãƒ•ã€å††ã‚°ãƒ©ãƒ•ã€æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ãªã©ï¼‰<br />
5. JSONãƒ‡ãƒ¼ã‚¿å†…ã®ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢<br />
6. JSONãƒ‡ãƒ¼ã‚¿ã®ã‚½ãƒ¼ãƒˆï¼ˆç‰¹å®šã®ã‚­ãƒ¼ã‚’åŸºæº–ã«æ˜‡é †ã¾ãŸã¯é™é †ï¼‰<br />
7. JSONãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆç‰¹å®šã®æ¡ä»¶ã‚’æº€ãŸã™ãƒ‡ãƒ¼ã‚¿ã®ã¿è¡¨ç¤ºï¼‰<br />
8. JSONãƒ‡ãƒ¼ã‚¿ã®ç·¨é›†ï¼ˆå€¤ã®å¤‰æ›´ã€è¦ç´ ã®è¿½åŠ ãƒ»å‰Šé™¤ãªã©ï¼‰<br />
9. JSONãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ï¼‰<br />
10. JSONãƒ‡ãƒ¼ã‚¿ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼ˆå¤‰æ›´å±¥æ­´ã®è¿½è·¡ã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã®å¾©å…ƒãªã©ï¼‰<br />
11. ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ­ãƒ¼ãƒ«åˆ¥ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ãªã©ï¼‰

## è²¢çŒ®

"ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æ­“è¿ã—ã¾ã™ã€‚<br />ã¾ãšIssueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã«ã¤ã„ã¦è­°è«–ã—ã¦ãã ã•ã„ã€‚"

Githubã®å…±åŒé–‹ç™ºçµŒé¨“ãŒä¸ååˆ†ãªãŸã‚ã€ã©ã®ã‚ˆã†ã«ä»–äººã¨ã®æ›´æ–°ã‚’ã—ã¦ã‚†ã‘ã°ã‚ˆã„ã‹ãªã©ã®çµŒé¨“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br />
è¦æœ›ã¯Issueã«ã¦é ‚ãã€æš–ã‹ãè¦‹å®ˆã£ã¦é ‚ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

[MIT](https://choosealicense.com/licenses/mit/)

é–²è¦§ç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ã€ãƒ‡ãƒ¼ã‚¿å…ƒã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«æº–ã˜ã¾ã™ã€‚

```

### state\atmos\autoModeAtom.ts

```
import { atom } from 'recoil';

export type AutoModeSpeed = 'off' | '3s' | '5s' | '10s' | 'custom' | 'textLength';

export const autoModeSpeedAtom = atom<AutoModeSpeed>({
  key: 'autoModeSpeed',
  default: 'off',
});

export const customSpeedAtom = atom<number>({
  key: 'customSpeed',
  default: 0,
});

```

### state\atmos\errorMessageAtom.ts

```
import { atom } from 'recoil';

export const errorMessageAtom = atom<string>({
  key: 'errorMessage',
  default: '',
});
```

### state\atmos\fileNameAtom.ts

```
import { atom } from 'recoil';

export const fileNameAtom = atom<string>({
  key: 'fileName',
  default: '',
});

```

### state\atmos\fontSizeAtoms.ts

```
import { atom } from 'recoil';

export const fontSizeAtom = atom<number>({
  key: 'fontSize',
  default: 16, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’è¨­å®š
});

```

### state\atmos\invalidDataAtom.ts

```
import { atom } from "recoil";

export const invalidDataAtom = atom({
  key: 'invalidData',
  default: false,
});
```

### state\atmos\jsonDataAtom.ts

```
import { atom } from 'recoil';
export interface JsonData {
  [key: string]: string | undefined; // ã‚­ãƒ¼ã¯æ–‡å­—åˆ—ã€å€¤ã¯æ–‡å­—åˆ—ã‹undefinedã‚’è¨±å®¹
  // ID: string;
  // instruction: string;
  // input: string;
  // output: string;
  // text: string;
}

export interface JsonDataState {
  data: JsonData[];
  totalCount: number;
  [index: number]: JsonData; // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚·ã‚°ãƒãƒãƒ£ã‚’è¿½åŠ 
}

export const jsonDataAtom = atom<JsonDataState>({
  key: 'jsonData',
  default: {
    data: [],
    totalCount: 0,
  },
});

export const indexAtom = atom({
  key: 'index',
  default: 0,
});

export const chunkSizeAtom = atom({
  key: 'chunkSize',
  default: 1000, // åˆæœŸå€¤ã¯1000ä»¶
});

export interface FileAtom extends File {
  path?: string;
}

export const fileAtom = atom<FileAtom | null>({
  key: 'file',
  default: null,
});

export const renderedDataAtom = atom<JsonData[]>({
  key: 'renderedData',
  default: [],
});
```

### state\atmos\themeAtom.ts

```
import { atom } from 'recoil';
import { ThemeColors } from '@/styles/themeColorPalette';

export type ThemeMode = 'light' | 'dark' | 'custom1' | 'custom2' | 'custom3' | 'custom4' | 'custom5' | 'custom6';

export const themeAtom = atom<ThemeMode>({
  key: 'themeAtom',
  default: 'light',
});

export const originalColors = {
  name: 'Ocean',
  header: '#2c3e50',
  sidebar: '#34495e',
  sidebarSelected: '#2980b9',
  sidebarHover: '#ced4da',
  main: '#ecf0f1',
  footer: '#34495e',
  text: '#E6E6E6',
  link: '#3498db',
  headerText: '#FFFFFF', // ç™½è‰²
  footerText: '#FFFFFF', // ç™½è‰²
  mainText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
  sidebarText: '#FFFFFF', // ç™½è‰²
};

export const trendyColors1 = {
  name: 'TikTok Marketing Partners',
  header: '#000000',
  sidebar: '#74f0ed',
  sidebarSelected: '#ea445a',
  sidebarHover: '#ced4da',
  main: '#ffffff',
  footer: '#000000',
  text: '#E6E6E6',
  link: '#EA445A',
  headerText: '#FFFFFF', // ç™½è‰²
  footerText: '#FFFFFF', // ç™½è‰²
  mainText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
  sidebarText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
};

export const trendyColors2 = {
  name: 'Bold by Nature',
  header: '#172d13',
  sidebar: '#A0522D',
  sidebarSelected: '#6bb77b',
  sidebarHover: '#ced4da',
  main: '#ffffff',
  footer: '#172d13',
  text: '#ffffff',
  link: '#d76f30',
  headerText: '#FFFFFF', // ç™½è‰²
  footerText: '#FFFFFF', // ç™½è‰²
  mainText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
  sidebarText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
};

export const trendyColors3 = {
  name: 'Amour',
  header: '#5ac3b0',
  sidebar: '#de5935',
  sidebarSelected: '#f7cd46',
  sidebarHover: '#ced4da',
  main: '#ffffff',
  footer: '#5ac3b0',
  text: '#333333',
  link: '#de5935',
  headerText: '#FFFFFF', // ç™½è‰²
  footerText: '#FFFFFF', // ç™½è‰²
  mainText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
  sidebarText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
};

export const trendyColors4 = {
  name: 'The Authentic Brief',
  header: '#B2A489',
  sidebar: '#5ebec4',
  sidebarSelected: '#f92c85',
  sidebarHover: '#ced4da',
  main: '#ffffff',
  footer: '#B2A489',
  text: '#2c3e50',
  link: '#5ebec4',
  headerText: '#FFFFFF', // ç™½è‰²
  footerText: '#FFFFFF', // ç™½è‰²
  mainText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
  sidebarText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
};

export const trendyColors5 = {
  name: '70s Inspired',
  header: '#101357',
  sidebar: '#fea49f',
  sidebarSelected: '#fbaf08',
  sidebarHover: '#ced4da',
  main: '#ffffff',
  footer: '#101357',
  text: '#000000',
  link: '#fea49f',
  headerText: '#FFFFFF', // ç™½è‰²
  footerText: '#FFFFFF', // ç™½è‰²
  mainText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
  sidebarText: '#333333', // æš—ã„ã‚°ãƒ¬ãƒ¼
};

export const customThemeColorsAtom = atom<ThemeColors[]>({
  key: 'customThemeColorsAtom',
  default: [originalColors, trendyColors1, trendyColors2, trendyColors3, trendyColors4, trendyColors5],
});

```

### state\FileUploader.tsx

```
import { useRef, useState } from 'react';
import { useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';

import { fileNameAtom } from '@/state/atmos/fileNameAtom';
import { indexAtom, JsonData, jsonDataAtom } from '@/state/atmos/jsonDataAtom';
import { parseJsonData } from '@/lib/utils/helpers/helpers';
import Button from '@/components/atoms/Button/Button';
import { errorMessageAtom } from '@/state/atmos/errorMessageAtom';
import { invalidDataAtom } from '@/state/atmos/invalidDataAtom';


const FileUploader = () => {
  const fileInputRef = useRef<HTMLInputElement>(null);
  const setFileName = useSetRecoilState(fileNameAtom);
  const setIndex = useSetRecoilState(indexAtom);
  const setJsonData = useSetRecoilState(jsonDataAtom);
  const [, setInvalidData] = useRecoilState(invalidDataAtom);

  const [isLoading, setIsLoading] = useState(false);

  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files && e.target.files.length > 0) {
      setIsLoading(true);
      const file = e.target.files[0];
      setFileName(file.name);
      setIndex(0);

      try {
        const formData = new FormData();
        formData.append('file', file);

        const res = await fetch('/api/upload', {
          method: 'POST',
          body: formData,
        });

        if (!res.ok) {
          const errorData = await res.json();
          throw new Error(errorData.error || 'ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
        }

        const parsedData = await res.json();
        setJsonData({
          data: parsedData,
          totalCount: parsedData.length,
        });

      } catch (error) {
        console.error('Error uploading file:', error);
        // ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’è¿½åŠ  (ä¾‹: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º)
      } finally {
        setIsLoading(false);
      }
    }
  };

  const handleClick = () => {
    console.log('Button clicked'); // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ç¢ºèªç”¨ãƒ­ã‚°
    console.log(fileInputRef.current); // inputè¦ç´ ã®å‚ç…§ç¢ºèªç”¨ãƒ­ã‚°
    fileInputRef.current?.click();
  };


  return (
    <div>
      {/* ãƒœã‚¿ãƒ³ã®onClickãƒãƒ³ãƒ‰ãƒ©ã‚’ä¿®æ­£ */}
      <Button onClick={handleClick} disabled={isLoading}>
        {isLoading ? 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...' : 'ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼'}
      </Button>
      {/* inputè¦ç´ ã«refã‚’è¨­å®š */}
      <input
        type="file"
        ref={fileInputRef} // refã‚’ç¢ºå®Ÿã«è¨­å®š
        onChange={handleFileChange}
        accept=".json,.jsonl"
        style={{ display: 'none' }} // inputè¦ç´ ã‚’éè¡¨ç¤ºã«ã™ã‚‹
      />
    </div>
  );
};

export default FileUploader;

const ErrorMessage = () => {
  const errorMessage = useRecoilValue(errorMessageAtom);

  return errorMessage ? <p className="text-red-500">{errorMessage}</p> : null;
};

```

### state\JsonPaginator.tsx

```
import { indexAtom, jsonDataAtom } from '@/state/atmos/jsonDataAtom';
import { useRecoilState } from 'recoil';

const JsonPaginator = () => {
  const [jsonData, setJsonData] = useRecoilState(jsonDataAtom);
  const [index, setIndex] = useRecoilState(indexAtom);

  // æ¬¡ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
  const showNextItems = () => {
    if (index + 1 < jsonData.data.length) {
      setIndex(index + 1);
    }
  };

  // å‰ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
  const showPreviousItems = () => {
    if (index - 1 >= 0) {
      setIndex(index - 1);
    }
  };

  return (
    <div>
      {jsonData && jsonData.data.length > 0 ? (<button onClick={showPreviousItems} disabled={index === 0}>å‰ã¸</button>): null}
      {jsonData && jsonData.data.length > 0 ? (<button onClick={showNextItems} disabled={index + 1 >= jsonData.data.length}>æ¬¡ã¸</button>): null }
    </div>
  );
};

export default JsonPaginator;
```

